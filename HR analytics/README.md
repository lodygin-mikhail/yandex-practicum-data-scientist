# HR аналитика

[HTML](https://github.com/lodygin-mikhail/yandex-practicum-data-scientist/blob/main/Car%20cost%20estimation/Project%206.html)     [ipynb](https://github.com/lodygin-mikhail/yandex-practicum-data-scientist/blob/main/Car%20cost%20estimation/Project%206.ipynb)

## Навыки и инструменты

- pandas
- matplotlib
- numpy
- scipy
- phik
- pipeline
- ROC-AUC
- DecisionTree
- SVC
- LightGBM
- XGBoost

## Задача 1

### Описание проекта
HR-аналитики компании «Работа с заботой» помогают бизнесу оптимизировать управление персоналом: бизнес предоставляет данные, а аналитики предлагают, как избежать финансовых потерь и оттока сотрудников. В этом HR-аналитикам пригодится машинное обучение, с помощью которого получится быстрее и точнее отвечать на вопросы бизнеса.

Компания предоставила данные с характеристиками сотрудников компании. Среди них — уровень удовлетворённости сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворённости от 0 до 1, где 0 — совершенно неудовлетворён, 1 — полностью удовлетворён. 

Описание данных:

- `id` — уникальный идентификатор сотрудника;
- `dept` — отдел, в котором работает сотрудник;
- `level` — уровень занимаемой должности;
- `workload` — уровень загруженности сотрудника;
- `employment_years` — длительность работы в компании (в годах);
- `last_year_promo` — показывает, было ли повышение за последний год;
- `last_year_violations` — показывает, нарушал ли сотрудник трудовой договор за последний год;
- `supervisor_evaluation` — оценка качества работы сотрудника, которую дал руководитель;
- `salary` — ежемесячная зарплата сотрудника;
- `job_satisfaction_rate` — уровень удовлетворённости сотрудника работой в компании, целевой признак.

Целью исследования является разработка модели машинного обучения , которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика.

Исследование разделим на этапы:
- Загрузка данных
- Предобработка данных
- Исследовательский анализ данных
- Корреляционный анализ
- Подготовка данных
- Обучение моделей
- Анализ важности признаков
- Выводы

### Общий вывод
Целью исследования была разработка модели машинного обучения , которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика.

В ходе исследования были выполнены следующие шаги:

1. **Загрузка данных:**
    - В датасете *df_train* 4000 строчек и 10 признаков. У столбцов `id`, `employment_years`, `supervisor_evaluation`, `salary` тип данных int64, у столбца `job_satisfaction_rate` - float64, у остальных - object. Пропуски есть в столбце `dept` (6 штук) и `level` (4 штуки).
    - В датасете *df_test_features* 2000 строчек и 10 признаков. У столбцов `id`, `employment_years`, `supervisor_evaluation`, `salary` тип данных int64, у остальных - object. Пропуски есть в столбце `dept` (2 штуки) и `level` (1 штука).
    - В датасете *df_test_target* 2000 строчек и 2 признака. У столбца `id` тип данных int64, у `job_satisfaction_rate` - float64. Пропусков в данных нет.
    
2. **Предобработка данных:**
    - В датасете *df_train* было заменено значение **sinior** на **senior** в столбце `level`. Полных строк-дубликатов найдено не было;

    - В датасете *df_test_features* было заменено значение **sinior** на **senior** в столбце `level`, в столбцах `dept` и `workload` пустые строки были заменены на пропуски. Полных строк-дубликатов найдено не было;

    - В датасете *df_test_target* полных строк-дубликатов найдено не было;

    - Во всех датасетах столбец `id` был переведен в индекс.

3. **Исследовательский анализ:**
    - Датасет *df_train*:
         - **dept:** В компании 37,9% людей работают в отделе продаж, 21,7% - в технологическом отделе, 15,3% - в закупках, 13,8% - в отделе маркетинга и 11,4% - в отделе кадров;
         - **level:** 47,4% работников являются младшими сотрудниками, 43,6% сотрудников уровня middle и 9% старших сотрудников;
         - **workload:** 51,6% сотрудников имеют среднюю нагрузку, 30% - низкую и 18,4% - высокую;
         - **employment_years:** Средний стаж работы в компании - 3,82 года, при этом максимальное значение - 10 лет. Медиана - 3 года;
         - **last_year_promo:** 3% сотрудников получили повышение за последний год;
         - **last_year_violations:** Всего 14 процентов сотрудников нарушали трудовой договор за последний год;
         - **supervisor_evaluation:** Среднняя оценка качества работы сотрудника, которую дал руководитель - 3,46 со станд.отклонением - 1,03, медианное значение - 3.
         - **salary:** Средняя зарплата в компании - 34457,4 у.ед с большим станд.отклонением в 15050,6 у.ед. Минимальная зарплата - 12000 у.ед, максимальная - 98400 у.ед, медианное значение - 31200 у.ед.
         - **job_satisfaction_rate:** В среднем сотрудники компании довольны на 53,3%, при этом минимальный уровень удовлетворенности - это 3%, а максимальный - 100%, медиана - 55%.

    - Датасет *df_test_features*:
         - **dept:** В компании 38,2% людей работают в отделе продаж, 22,8% - в технологическом отделе, 13,7% - в закупках, 14% - в отделе маркетинга и 11,4% - в отделе кадров;
         - **level:** 48,7% работников являются младшими сотрудниками, 42,7% сотрудников уровня middle и 8,6% старших сотрудников;
         - **workload:** 52,2% сотрудников имеют среднюю нагрузку, 29,7% - низкую и 18,2% - высокую;
         - **employment_years:** Средний стаж работы в компании - 3,67 года, при этом максимальное значение - 10 лет. Медиана - 3 года;
         - **last_year_promo:** 3,2% сотрудников получили повышение за последний год;
         - **last_year_violations:** 13,1 процентов сотрудников нарушали трудовой договор за последний год;
         - **supervisor_evaluation:** Среднняя оценка качества работы сотрудника, которую дал руководитель - 3,53 со станд.отклонением - 1,00, медианное значение - 4.
         - **salary:** Средняя зарплата в компании - 34066,8 у.ед с большим станд.отклонением в 15398,4 у.ед. Минимальная зарплата - 12000 у.ед, максимальная - 96000 у.ед, медианное значение - 30000 у.ед.

    - Датасет *df_test_target*:
         - **job_satisfaction_rate:** В среднем сотрудники компании довольны на 54,9%, при этом минимальный уровень удовлетворенности - это 3%, а максимальный - 100%, медиана - 58%.
        
4. **Корреляционный анализ:**

Мультиколлинеарности в данных не обнаружено, т.к. все значения корреляции хи-квадрат меньше 0,9.

5. **Подготовка и обучение моделей:**

В ходе моделирования была найдена и обучена модель для определения удовлетворенности сотрудника работой. Лучшие результаты показала модель дерева решений **DecisionTreeRegressor(max_depth=14, max_features=11, random_state=42)**. Её показатели метрики SMAPE для тренировочной выборки - 15.916, для тестовой выборки - 14.59. Модель преодолела порог в 15 на тестовой выборке, поэтому можно утверждать, что модель успешно обучилась.

6. **Анализ важности признаков:**

Наиболее важные признаки - `supervisor_evaluation`, `employment_years`, `last_year_violations` и `salary`.

Признаки, имеющие незначительное влияние на модель - `dept`, `last_year_promo`.

## Задача 2

### Описание проекта

Ваша вторая задача — построить модель, которая сможет на основе данных заказчика предсказать то, что сотрудник уволится из компании.

Описание данных:

- `id` — уникальный идентификатор сотрудника;
- `dept` — отдел, в котором работает сотрудник;
- `level` — уровень занимаемой должности;
- `workload` — уровень загруженности сотрудника;
- `employment_years` — длительность работы в компании (в годах);
- `last_year_promo` — показывает, было ли повышение за последний год;
- `last_year_violations` — показывает, нарушал ли сотрудник трудовой договор за последний год;
- `supervisor_evaluation` — оценка качества работы сотрудника, которую дал руководитель;
- `salary` — ежемесячная зарплата сотрудника;
- `quit` —  увольнение сотрудника из компании.

Целью исследования является разработка модели машинного обучения , которая сможет предсказать увольнение сотрудника из компании.

Исследование разделим на этапы:
- Загрузка данных
- Предобработка данных
- Исследовательский анализ данных
- Корреляционный анализ
- Добавление признака
- Подготовка данных
- Обучение моделей
- Анализ важности признаков
- Выводы

### Общий вывод
Целью исследования было построить модель, которая сможет на основе данных заказчика предсказать то, что сотрудник уволится из компании.

В ходе исследования были выполнены следующие шаги:

1. **Загрузка данных:**
    - В датасете *df_train_quit* 4000 строчек и 10 признаков. У столбцов `id`, `employment_years`, `supervisor_evaluation`, `salary` тип данных int64, у остальных - object. Пропусков в данных нет.
    - В датасете *df_test_target_quit* 2000 строчек и 2 признака. У столбца `id` тип данных int64, у `quit` - object. Пропусков в данных нет.

2. **Предобработка данных:**
    - В датасете *df_train_quit* было заменено значение **sinior** на **senior** в столбце `level`. Полных строк-дубликатов найдено не было;

    - В датасете *df_test_features_quit* все оставлено без изменений;

    - В датасете *df_test_target_quit* полных строк-дубликатов найдено не было.

3. **Исследовательский анализ:**
    - Датасет *df_train_quit*:
        - **dept:** В компании 35,9% людей работают в отделе продаж, 23,2% - в технологическом отделе, 14,7% - в закупках, 14,6% - в отделе маркетинга и 11,6% - в отделе кадров;
        - **level:** 48,7% работников являются младшими сотрудниками, 42,4% сотрудников уровня middle и 8,9% старших сотрудников;
        - **workload:** 53% сотрудников имеют среднюю нагрузку, 30,2% - низкую и 16,8% - высокую;
        - **employment_years:** Средний стаж работы в компании - 3,7 лет, при этом максимальное значение - 10 лет. Медиана - 3 года;
        - **last_year_promo:** 2,8% сотрудников получили повышение за последний год;
        - **last_year_violations:** 13,6% процентов сотрудников нарушали трудовой договор за последний год;
        - **supervisor_evaluation:** Среднняя оценка качества работы сотрудника, которую дал руководитель - 3,47 со станд.отклонением - 1,00, медианное значение - 4.
        - **salary:** Средняя зарплата в компании - 33805,8 у.ед с большим станд.отклонением в 15152,4 у.ед. Минимальная зарплата - 12000 у.ед, максимальная - 96000 у.ед, медианное значение - 30000 у.ед.
        - **quit:** 28,2% сотрудников уволились из компании.

    - Датасет *df_test_features_quit* оставлен без изменений.

    - Датасет *df_test_target_quit*:
        - **quit:** 28,2 процентов сотрудников компании уволились.

    - В ходе составления типичного "портрета" уволевшегося сотрудника было установлено, что типичный ушедший сотрудник был из отдела продаж, он занимал младшую должность и имел низкую или среднюю нагрузку. Его зарплата была около 23,9 тысяч у.е и его не повышали в предыдуший год.
        
4. **Корреляционный анализ:**

Мультиколлинеарности в данных не обнаружено, т.к. все значения корреляции хи-квадрат меньше 0,9.

5. **Подготовка и обучение моделей:**

В ходе моделирования была найдена и обучена модель для предсказания увольнения сотрудника из компании. Лучшие результаты показала модель метода опорных векторов **SVC(C=4, kernel='poly', probability=True, random_state=42)**. Её показатели метрики roc-auc для тренировочной выборки - 0.929, для тестовой выборки - 0.925. Это хорошие показатели, означающие, что модель хорошо справляется со своей задачей.

6. **Анализ важности признаков:**

Наиболее важные признаки - `employment_years`, `job_satisfaction_rate`, `level` и `salary`.

Признаки, имеющие незначительное влияние на модель - `dept`, `last_year_promo`, `last_year_violations`.
